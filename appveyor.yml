image: MinGW

environment:
  matrix:
  - qt: C:\Qt\5.9\mingw53_32\bin
    PLATFORM: i586
    COMPILER: mingw
    
    
clone_depth: 1

init:
  - set TAG_NAME=%APPVEYOR_REPO_TAG_NAME%
  - set PATH=C:\Qt\5.9\mingw53_32\bin;%PATH%
  - set PATH=C:\Qt\Tools\mingw530_32\bin;%PATH%
  - set PATH=%PATH:C:\Program Files\Git\usr\bin;=%
build_script:
  - call "scripts/build_windows.cmd"

artifacts:
  - path: build\QBit_$(appveyor_repo_tag_name)_windows.zip
    name: portable


deploy:
- provider: GitHub
  tag: $(appveyor_repo_tag_name)
  release: $(appveyor_repo_tag_name)
  description: $(appveyor_repo_tag_name)
  auth_token:
    secure: lNrwOGAylXafSwJAAwEbYBFGbpGjy7aYSCyAWl9jikP22ykJ1BqwKPKhKjo+f1JT
  prerelease: true
  artifact: portable
